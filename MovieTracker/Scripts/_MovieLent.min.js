function MovieReturned() { var e = { movieId: $(".movieReturned").data("movieId"), reloadLoc: $(".movieReturned").data("reloadLoc") }; debugger; $.ajax({ url: "/Movie/Returned", type: "post", data: e }).success(function (t) { debugger; var n; if (e.reloadLoc.indexOf("Detail") > 0) n = $(".movieLentStatus"); else { n = $("#lentOutDetails" + e.movieId); $("#lentOutStatus" + e.movieId).attr("src", "../../Content/available.png") } n.empty(); n.append(t) }) } function MovieLentOut() { var e = $("#lentToInput").val(); var t = $("#datepicker").datepicker({ dateFormat: "yy-mm-dd" }).val(); var n = { movieId: $("#lentOut").data("movieId"), borrower: e, borrowedDate: t }; debugger; $.ajax({ url: "/Movie/LentOut", type: "post", data: n }).success(function (e) { debugger; $(".movieLentStatus").empty(); $(".movieLentStatus").append(e) }) } function validateLentOutInput() { var e = validateBorrower($("#lentToInput").val()); var t = $("#datepicker").datepicker("getDate") != null; if (!e) $("#lentToValidation").text("Input must be alphanumeric."); else $("#lentToValidation").text(""); if (!t) $("#lentOnValidation").text("Please enter the lent out date."); else $("#lentOnValidation").text(""); if (!e || !t) $("#lentOut").attr("disabled", "disabled"); else $("#lentOut").removeAttr("disabled") } function validateBorrower(e) { var t = /^[\w\-\s]+$/.test(e); return e.trim() != "" && /^[\w\-\s]+$/.test(e) } $(function () { $("#datepicker").datepicker({ onSelect: function () { validateLentOutInput() } }) }); $(function () { $("#lentToInput").keyup(function (e) { var t = e.keyCode; if ((t < 65 || t > 90) && (t < 48 || t > 57) && t != 222 && t != 32 && t != 8 && t != 16) return false; validateLentOutInput() }) }); $(function () { $(".movieReturned").click(function () { MovieReturned() }) }); $(function () { $("#lentOut").attr("disabled", "disabled"); var e = $("#lentToInput").val() != ""; if (e) { $("#lentToInput").attr("disabled", "disabled"); $("#datepicker").datepicker("disable"); $("#lentOut").hide() } else { $("#lentToInput").removeAttr("disabled"); $("#datepicker").datepicker("enable"); $("#lentOut").show() } })